- job:
    name: upgrade_test
    description: 'This job executes upgrade test'
    parameters:
        - choice:
            name: box
            choices:
                !include: './maxscale_jobs/include/boxes.yaml'
        - !include: './maxscale_jobs/include/do_not_destroy_vm.yaml'
        - !include: './maxscale_jobs/include/old_target.yaml'
        - !include: './maxscale_jobs/include/new_target.yaml'
        - !include: './maxscale_jobs/include/ci_url.yaml'
        - !include: './maxscale_jobs/include/ci_url_suffix.yaml'
        - !include: './maxscale_jobs/include/repo_user.yaml'
        - !include: './maxscale_jobs/include/repo_password.yaml'
        - !include: './maxscale_jobs/include/cnf_file.yaml'
        - !include: './maxscale_jobs/include/maxadmin_command.yaml'
        - !include: './maxscale_jobs/include/slave.yaml'
    properties:
      - throttle:
          option: project
          max-per-node: 5
          max-total: 25
          enabled: true
    builders:
        - shell:
            '$HOME/build-scripts/upgrade_test.sh'
    wrappers:
      - !include: './maxscale_jobs/include/workspace-cleanup.yaml'
    concurrent: true

